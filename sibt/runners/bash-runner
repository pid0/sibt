#!/usr/bin/env bash

set -e
set -u
set -o pipefail

notImplStatus=200

fileToRun="$1"
shift 1
action="$1"
shift 1

writes-to() {
  return $notImplStatus
}

available-options() {
  return $notImplStatus
}

restore() {
  return $notImplStatus
}

list-files() {
  return $notImplStatus
}

versions-of() {
  return $notImplStatus
}

sync() {
  return $notImplStatus
}

source "$fileToRun"

setup-variables() {
  for varAssignment in "$@"; do
    local varName="${varAssignment%%=*}"
    local varValue="${varAssignment#*=}"
    declare -n variable="$varName"
    variable="$varValue"
  done
}

case $action in
  available-options) available-options;;
  sync) setup-variables "${@:1:$#}"; sync;;
  versions-of) setup-variables "${@:3:$#}"; versions-of "$@";;
  restore) setup-variables "${@:6:$#}"; restore "$@";;
  list-files) setup-variables "${@:6:$#}"; list-files "$@";;
  writes-to) writes-to;;
esac

